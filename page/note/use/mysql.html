<!DOCTYPE html>
<html lang="en">
<head>
    
<!-- start head.html -->
    <meta charset="UTF-8">
    <meta content="origin-when-cross-origin" name="referrer"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="fluid-icon" href="/html/img/fluidicon.jpg" title="MaiJZ">
    <link rel="icon" type="image/x-icon" href="/html/img/favicon.ico">

    <link rel="stylesheet" href="/html/css/maijz-frameworks.css">

    <script src="/html/lib/jquery-3.2.1.min.js"></script>
    <script src="/html/js/tool.js"></script>

    <style>
        .maincontent{  min-height: 550px;  }
    </style>
<!-- end head.html -->


    <title>MySQL笔记 - MaiJZ</title>

    <!-- start markdown-->
    <link rel="stylesheet" href="/html/css/github-markdown.css">
    <link rel="stylesheet" href="/html/lib/prism/prism.css">
    <script src="/html/lib/prism/prism.js"></script>
    <!-- end markdown-->


</head>
<body>
<!-- start header.html -->
<div class="position-relative">
    <div id="header-content" class="header-body">
        <link rel="stylesheet" href="/html/css/header.css">

        <div id="header" class="header" role="banner">
            <div class="container clearfix">
                <a aria-label="GitHub" class="header-logo-invertocat" target="_top"
                   href="https://github.com/maijz128">
                    <svg aria-hidden="true" class="octicon" height="32" version="1.1" viewBox="0 0 16 16" width="32">
                        <use xlink:href="#svg-github"/>
                    </svg>
                </a>
                <a aria-label="Twitter" class="header-logo-invertocat" target="_top"
                   href="https://twitter.com/maijz128">
                    <svg aria-hidden="true" class="octicon" height="32" version="1.1" viewBox="0 0 16 16" width="32">
                        <use xlink:href="#svg-twitter"/>
                    </svg>
                </a>
                <a aria-label="Email" class="header-logo-invertocat" target="_top"
                   href="mailto:maijz128@gmail.com">
                    <svg aria-hidden="true" class="octicon" height="32" version="1.1" viewBox="0 0 16 16" width="32">
                        <use xlink:href="#svg-email"/>
                    </svg>
                </a>

                <ul class="header-nav float-right st-nav-tabs" role="navigation">
                    <li class="header-nav-item">
                        <a class="header-nav-link" href="/" target="_top">Profile</a></li>
                    <li class="header-nav-item">
                        <a class="header-nav-link " href="/page/book/" target="_top">Book</a></li>
                    <li class="header-nav-item">
                        <a class="header-nav-link " href="/page/note/" target="_top">Note</a></li>
                    <li class="header-nav-item">
                        <a class="header-nav-link" href="/page/coder/" target="_top">Coder</a></li>
                    <li class="header-nav-item">
                        <a class="header-nav-link" href="/page/game/" target="_top">Game</a></li>

                    <li class="header-nav-item dropdown  nav-item">
                        <a class="header-nav-link" href="javascript:void(0);">More</a>
                        <div class="dropdown-menu-content sub-items dropdown-menu-sw">
                            <div class="dropdown-menu dropdown-menu-sw">
                                <!--<div class="dropdown-divider"></div>-->
                                <a class="dropdown-item" href="/page/soft/">Soft</a>
                                <a class="dropdown-item" href="/page/fun/">Fun</a>
                                <a class="dropdown-item" href="/page/other/">Other</a>
                                <!--<div class="dropdown-divider"></div>-->
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div style="display: none;">
            
<svg style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg">

    <symbol id="svg-email" viewBox="0 0 14 16">
        <g>
            <path fill-rule="evenodd"
                  d="M0 4v8c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1zm13 0L7 9 1 4h12zM1 5.5l4 3-4 3v-6zM2 12l3.5-3L7 10.5 8.5 9l3.5 3H2zm11-.5l-4-3 4-3v6z"></path>
        </g>
    </symbol>

    <symbol id="svg-github" viewBox="0 0 16 16">
        <g id="github" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
        </g>
    </symbol>

    <symbol id="svg-twitter" viewBox="0 0 32 32">
        <g id="twitter-home_1_">
            <circle fill="#00acee" cx="16" cy="16" r="16"/>
            <g>
                <path fill="white" d="M25.753,9.549c-0.736,0.327-1.527,0.548-2.357,0.647c0.847-0.508,1.498-1.312,1.804-2.271
          c-0.793,0.47-1.671,0.812-2.606,0.996C21.846,8.124,20.78,7.626,19.6,7.626c-2.266,0-4.103,1.837-4.103,4.103
          c0,0.322,0.036,0.635,0.106,0.935c-3.41-0.171-6.433-1.805-8.458-4.288C6.792,8.983,6.59,9.687,6.59,10.44
          c0,1.423,0.724,2.679,1.826,3.415c-0.673-0.021-1.305-0.206-1.859-0.513c0,0.017,0,0.035,0,0.052c0,1.988,1.414,3.646,3.292,4.023
          c-0.345,0.094-0.707,0.144-1.081,0.144c-0.264,0-0.522-0.026-0.772-0.074c0.522,1.63,2.038,2.816,3.833,2.85
          c-1.404,1.1-3.174,1.756-5.096,1.756c-0.331,0-0.658-0.019-0.979-0.057c1.816,1.164,3.973,1.843,6.29,1.843
          c7.547,0,11.675-6.252,11.675-11.675c0-0.178-0.004-0.355-0.012-0.531C24.507,11.095,25.203,10.373,25.753,9.549z"/>
            </g>
        </g>
    </symbol>

</svg>
        </div>
    </div>
</div>
<!-- end header.html -->

<div role="main" class="maincontent">
    <div class="container-lg clearfix px-3 mt-4">
        <div class="col-10 offset-1">

            <div class="markdown-body">
                <h1 id="mysql-">MySQL使用笔记</h1>
<h2 id="-mysql">安装MySQL</h2>
<ul>
<li><p>检查是否安装mysql</p>
<pre><code>rpm -qa | grep mysql
</code></pre></li>
<li><p>安装</p>
<pre><code>yum install mysql
yum install mysql-server
yum install mysql-devel
</code></pre></li>
<li><p>验证安装</p>
<pre><code>mysqladmin --version
</code></pre></li>
<li><p>卸载</p>
<pre><code>rpm -e mysql　　// 普通删除模式
rpm -e --nodeps mysql　　
// 强力删除模式，如果使用上面命令删除时，提示有依赖的其它文件，则用该命令可以对其进行强力删除
</code></pre></li>
</ul>
<h2 id="-mysql">启动及关闭 MySQL</h2>
<ul>
<li><p>检查是否运行</p>
<pre><code>  /etc/rc.d/init.d/mysqld status
</code></pre></li>
<li><p>启动</p>
<pre><code>  service mysqld start
</code></pre></li>
<li><p>关闭</p>
<pre><code>  /etc/init.d/mysqld stop
</code></pre></li>
<li><p>重启</p>
<pre><code>  service mysqld restart
</code></pre><p> ​</p>
</li>
</ul>
<h2 id="mysql-">MySQL用户管理</h2>
<p>MySQL安装成功后，默认的root用户密码为空，为了安全起见给root设置密码：</p>
<pre><code>mysqladmin -u root password 123 (123为密码，也可以写成:&#39;123&#39;或&quot;123&quot;)
</code></pre><ul>
<li><p>登录</p>
<pre><code>  mysql -u root -p
</code></pre></li>
<li><p>添加用户</p>
<pre><code>  mysql&gt; create user  zx_root   IDENTIFIED by &#39;xxxxx&#39;;   
  //identified by 会将纯文本密码加密作为散列值存储
</code></pre></li>
<li><p>删除用户</p>
<pre><code>  mysql&gt;delete from mysql.user where user =&#39;testuser&#39; ;

  mysql&gt;flush privileges; (刷新系统权限表)
</code></pre><pre><code>  mysql&gt;drop user newuser;   
  //mysql5之前删除用户时必须先使用revoke 删除用户权限，然后删除用户，mysql5之后drop 命令可以删除用户的同时删除用户的相关权限
</code></pre></li>
<li><p>设置密码</p>
<pre><code>  mysql&gt; set password for testuser =password(&#39;xxxxxx&#39;);
</code></pre><pre><code>  mysql&gt; update  mysql.user  set  password=password(&#39;xxxx&#39;)  where user=&#39;otheruser&#39;
</code></pre><pre><code>  #mysqladmin -u root password &quot;new_password&quot;
</code></pre></li>
<li><p>忘记密码</p>
<ul>
<li><p>找到自己的<code>my.cnf</code>文件，通常会在 /etc目录下（如果不在，可以用<code>find / -name my.cnf</code>命令找一下）</p>
</li>
<li><p>然后使用 <code>vim my.cnf</code> 命令编辑该文件（建议先备份），在<code>[mysqld]</code>下面加上 <code>skip-grant-tables</code> ，作用是登陆时跳过登陆认证，然后<code>:wq</code>保存退出</p>
</li>
<li><p>然后用<code>service mysqld restart</code>重启mysql，接下来输入如下命令：</p>
<pre><code># mysql -uroot -p

mysql&gt; use mysql; 
mysql&gt; update user set password=password(&#39;123&#39;) where user=&#39;root&#39;; 
mysql&gt; flush privileges; (刷新系统权限表)

退出mysql
</code></pre></li>
<li><p>删除<code>my.cnf</code>中的 <code>skip-grant-tables</code>，重启mysql，完成。</p>
</li>
</ul>
</li>
</ul>
<h3 id="-">权限管理</h3>
<ul>
<li>查看用户权限    </li>
</ul>
<pre><code>mysql&gt; show grants for testuser;
</code></pre><ul>
<li>设置用户访问数据库权限</li>
</ul>
<pre><code>&gt;&gt; grant all privileges on test_db.* to testuser@localhost identified by &quot;123456&quot;;
//设置用户testuser，只能访问数据库test_db，其他数据库均不能访问 ；

&gt;&gt; grant all privileges on *.* to testuser@localhost identified by &quot;123456&quot;;
//设置用户testuser，可以访问mysql上的所有数据库 ；

&gt;&gt; grant all privileges on test_db.user_infor to testuser@localhost identified by &quot;123456&quot;;
//设置用户testuser，只能访问数据库test_db的表user_infor，数据库中的其他表均不能访问 ；
</code></pre><ul>
<li>设置用户操作权限</li>
</ul>
<pre><code>&gt;&gt; grant all privileges on *.* to testuser@localhost identified by &quot;123456&quot; WITH GRANT OPTION;
//设置用户testuser，拥有所有的操作权限，也就是管理员 ；

&gt;&gt; grant select on *.* to testuser@localhost identified by &quot;123456&quot; WITH GRANT OPTION;
//设置用户testuser，只拥有【查询】操作权限 ；

&gt;&gt; grant select,insert on *.* to testuser@localhost identified by &quot;123456&quot;;
//设置用户testuser，只拥有【查询\插入】操作权限 ；

&gt;&gt; grant select,insert,update,delete on *.* to testuser@localhost identified by &quot;123456&quot;;
//设置用户testuser，只拥有【查询\插入】操作权限 ；

&gt;&gt; REVOKE select,insert ON what FROM testuser
//取消用户testuser的【查询\插入】操作权限 ；
</code></pre><ul>
<li>设置用户远程访问权限</li>
</ul>
<pre><code>&gt;&gt; grant all privileges on *.* to testuser@&quot;192.168.1.100&quot; identified by &quot;123456&quot; ;
//设置用户testuser，只能在客户端IP为192.168.1.100上才能远程访问mysql
</code></pre><ul>
<li>关于root用户的访问设置</li>
</ul>
<p>设置所有用户可以远程访问mysql，修改my.cnf配置文件，将bind-address = 127.0.0.1前面加“#”注释掉，这样就可以允许其他机器远程访问本机mysql了；</p>
<pre><code>&gt;&gt; grant all privileges on *.* to root@&quot;%&quot; identified by &quot;123456&quot; ;
//设置用户root，可以在远程访问mysql

&gt;&gt; select host,user from user;
//查询mysql中所有用户权限

关闭root用户远程访问权限

&gt;&gt; delete from user where user=&quot;root&quot; and host=&quot;%&quot; ;
//禁止root用户在远程机器上访问mysql

&gt;&gt; flush privileges ;
//修改权限之后，刷新MySQL的系统权限相关表方可生效
</code></pre><h2 id="-">管理命令</h2>
<ul>
<li>SHOW DATABASES<ul>
<li>列出数据库列表</li>
</ul>
</li>
<li>USE <em>数据库名</em><ul>
<li>选择要操作的数据库</li>
</ul>
</li>
<li>SHOW TABLES<ul>
<li>显示指定数据库的所有表，使用该命令前需要使用 use 命令来选择要操作的数据库。</li>
</ul>
</li>
<li>SHOW COLUMNS FROM <em>数据表</em><ul>
<li>显示数据表的属性，属性类型，主键信息 ，是否为 NULL，默认值等其他信息。</li>
</ul>
</li>
<li>SHOW INDEX FROM <em>数据表</em><ul>
<li>显示数据表的详细索引信息，包括PRIMARY KEY（主键）。</li>
</ul>
</li>
</ul>
<h2 id="-">备份</h2>
            </div>

        </div>
    </div>
</div>

<!-- start footer.html -->
<style>
    .site-footer {
        background-color: #222;  color: white;
        min-height: 50px;   margin-top: 30px; overflow: hidden;
        font-size: 14px;  padding: 1em;  letter-spacing: 1px;
    }
    .site-info {  text-align: center;  margin-right: -15px;  margin-left: -15px;  }
    .site-info a:hover{  color: #78909c;  text-decoration: none;  }
    /* 动态为footer添加类fixed-bottom */
    .fixed-bottom {position: fixed;bottom: 0;width:100%;}
</style>
<script>
    $(function(){
        function footerPosition(){
            $("footer").removeClass("fixed-bottom");
            var contentHeight = document.body.scrollHeight,//网页正文全文高度
                winHeight = window.innerHeight;//可视窗口高度，不包括浏览器顶部工具栏
            if(!(contentHeight > winHeight)){
                //当网页正文高度小于可视窗口高度时，为footer添加类fixed-bottom
                $("footer").addClass("fixed-bottom");
            } else {
                $("footer").removeClass("fixed-bottom");
            }
        }
        footerPosition();
        $(window).resize(footerPosition);
    });
</script>
<footer class="site-footer" id="footer">
    <div class="site-info">
        MaiJZ © 2017<span class="sep"> | </span>
        Powered by <a href="https://github.com/maijz128/shpnode">SHPNode</a>
    </div>
</footer>
<!-- end footer.html-->
</body>
</html>